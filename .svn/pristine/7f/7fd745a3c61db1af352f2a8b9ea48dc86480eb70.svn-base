<template>
<transition name="slide">
  <div class="home">
    <!--<div class="headerTop">
      <x-header style="background-color:#ffcc00;arrow-color:#fff;" :left-options="{backText: ''}">{{$t('home.title')}}</x-header>
    </div>-->
    <prizemode
      :showPrize="prizeModeState"
      :prizeTotal="firstPrize.prizeMoney"
      :needGold="lockSectionInfo.allOpenMoney"
      @hidePrizeMode="hidePrizeMode"
      @sureJoin = "sureJoin"
    ></prizemode>
    <scroll
      :listenScroll="listenScroll"
      :data="matchPreview"
      @scroll="scrolls"
      @scrollDown="pullUp"
      @pullDown="pullDowns"
      class="scrollContent">
        <div class="bigBox">
          <div class="matchInfo">
            <div class="matchScore relative">
              <div class="matchPrize"><span>100万</span>金币</div>
              <!--<div class="nowUntil">{{data.matchStageDesc}}</div>-->
              <!--<div class="nowUntil" v-else>{{data.runningSectionId | matchStateType(data.matchState)}}</div>-->
              <div class="bothTeamInfo">
                <div class="teamLeft">
                  <div class="logo">
                    <div class="imgBox">
                      <img :src="data.homeTeamLogoUrl" alt="">
                    </div>
                  </div>
                  <div class="homeName text-center">
                    {{data.homeTeamName}}（主）
                    <!--<div class="reallyName ellipsis">{{data.homeTeamName}}</div><div class="text">（主）</div>-->
                  </div>
                </div>
                <div class="teamMiddle text-center">
                  <div class="title">{{data.leagueName}}dada</div>
                  <div class="matchTime">
                    <div class="timeText">{{data.matchStageType | matchStateType(data.matchTime )}}</div>
                  </div>
                </div>
                <div class="teamRight">
                  <div class="logo">
                    <div class="imgBox">
                      <img :src="data.guestTeamLogoUrl" alt="">
                    </div>
                  </div>
                  <div class="homeName text-center">
                    {{data.guestTeamName}}（客）
                    <!--<div class="reallyName ellipsis">{{data.guestTeamName}}</div><div class="text">（客）</div>-->
                  </div>
                </div>
              </div>
              <div class="bottomInfo absolute text-center">同时猜中3中赛果，可以平分奖池</div>
            </div>
            <div class="joinPeople">
              <div class="people">
                <div class="joinLeft">
                  已选： 0/6
                  <div class="questionIcon" @click="showQuestion"></div>
                </div>
                <div class="joinRight">
                  参与人数： 65653563
                </div>
              </div>
              <!--<div class="aboutShank" @click="showShank">当前排名</div>-->
            </div>
          </div>
          <div class="guessContainer">
            <div class="guessResult">
              <div class="guessTitle">
                猜胜平负
              </div>
              <!--result-->
              <!--choosed-->
              <div class="guessButtonContainer">
                <div class="buttonUntil" :class="[{choosed: winObj.keyString.indexOf('3') !== -1 }]" @click.prevent="guessWin(winObj, '3')">巴西 <span>胜</span></div>
                <div class="buttonUntil" :class="[{choosed: winObj.keyString.indexOf('1') !== -1 }]" @click.prevent="guessWin(winObj, '1')"><span>平</span></div>
                <div class="buttonUntil" :class="[{choosed: winObj.keyString.indexOf('0') !== -1 }]" @click.prevent="guessWin(winObj, '0')">墨西哥 <span>胜</span></div>
              </div>
            </div>
            <div class="guessSize">
              <div class="guessTitle">
                猜大小球
              </div>
              <div class="guessButtonContainer">
                <div class="buttonUntil" :class="[{choosed: ballSize.keyString.indexOf('GT') !== -1 }]" @click.prevent="guessScore(ballSize, 'GT')">高于 <span>3</span></div>
                <div class="buttonUntil" :class="[{choosed: ballSize.keyString.indexOf('EQ') !== -1 }]" @click.prevent="guessScore(ballSize, 'EQ')"><span>平</span></div>
                <div class="buttonUntil" :class="[{choosed: ballSize.keyString.indexOf('LT') !== -1 }]" @click.prevent="guessScore(ballSize, 'LT')">低于 <span>3</span></div>
              </div>
            </div>
            <div class="guessScore">
              <div class="guessTitle">
                猜全场比分
              </div>
              <!--主队赢-->
              <div class="guessButtonSmall">
                <div class="buttonUntilSmall"><span>1:0</span></div>
                <div class="buttonUntilSmall"><span>2:0</span></div>
                <div class="buttonUntilSmall"><span>2:1</span></div>
                <div class="buttonUntilSmall"><span>3:0</span></div>
                <div class="buttonUntilSmall"><span>3:1</span></div>
                <div class="buttonUntilSmall"><span>4:0</span></div>
                <div class="buttonUntilSmall"><span>4:1</span></div>
                <div class="buttonUntilSmall"><span>4:2</span></div>
                <div class="buttonUntilSmall"><span>4:3</span></div>
                <div class="buttonUntilSmall"><span>胜其他</span></div>
              </div>
              <!--平-->
              <div class="guessButtonSmall marginBoth">
                <div class="buttonUntilSmall"><span>0:0</span></div>
                <div class="buttonUntilSmall"><span>1:1</span></div>
                <div class="buttonUntilSmall"><span>2:2</span></div>
                <div class="buttonUntilSmall"><span>3:3</span></div>
                <div class="buttonUntilSmall"><span>平其他</span></div>
              </div>
              <!--客队赢-->
              <div class="guessButtonSmall">
                <div class="buttonUntilSmall"><span>0:1</span></div>
                <div class="buttonUntilSmall"><span>0:2</span></div>
                <div class="buttonUntilSmall"><span>1:2</span></div>
                <div class="buttonUntilSmall"><span>0:3</span></div>
                <div class="buttonUntilSmall"><span>1:3</span></div>
                <div class="buttonUntilSmall"><span>2:3</span></div>
                <div class="buttonUntilSmall"><span>0:4</span></div>
                <div class="buttonUntilSmall"><span>1:4</span></div>
                <div class="buttonUntilSmall"><span>2:4</span></div>
                <div class="buttonUntilSmall"><span>负其他</span></div>
              </div>
            </div>
          </div>
          <div class="sureButton text-center">需要消耗xx金币{{choosedNum}}</div>
          <div style="height: .3rem"></div>
        </div>
    </scroll>
    <transition name="fade">
      <shank v-if="shank" @hideshank="hideShankNow"></shank>
    </transition>
  </div>
</transition>
</template>
<style>
  .clas {
    flex-wrap: wrap;
  }
</style>
<script>
  import { getHomeInfo, getJoinGuess, openIssuePass } from '@/api/home'
  import scroll from '@/components/scroll/scroll'
  import loading from '@/components/loading/loading'
  import shank from '@/components/shank/shank'
  import prizemode from '@/components/prizemode/prizemode'
  import { mapState } from 'vuex'
  import { XHeader, Swiper, SwiperItem, Checker, CheckerItem, Confirm } from 'vux'
  // import { clearInterval } from 'timers';
  let temObj = {
    'spf': {
      'spfBetItem': {
        '0': '',
        '1': '',
        '2': ''
      },
      'drawResult': '',
      'myBetItem': '',
      'playId': ''
    },
    'dxf': {
      'dxfBetItem': {
        'EQ': '',
        'GT': '',
        'LT': ''
      },
      'drawResult': '',
      'myBetItem': '',
      'playId': ''
    },
    'sectionId': '',
    'issueNo': '',
    'state': '',
    'beginTime': '',
    'endTime': ''
  }
  export default {
    data () {
      return {
        listenScroll: true,
        shank: false,
        step: 10,
        data: {},
        moveDistance: 80,
        prizeModeState: false, // 奖品弹窗状态
        userCode: '',
        userInfo: {},
        lockSectionInfo: {},
        firstPrize: {},
        secondPrize: {},
        lkey: '',
        recharge: false,
        isPull: false,
        isHaveMatch: false,
        thirdPrize: {},
        uniqueId: null,
        matchNo: null,
        matchPreview: [], // 赛事预告数据
        prizeInfo: [], // 奖品信息
        matchScore: {}, // 每节得分情况
        matchSectionBet: [], // 每节比赛投注信息
        levelList: [temObj, temObj, temObj, temObj, temObj], // 关卡数量
        levelIndex: 0, // 当前关卡索引
        runTimer: null, // 计时器
        recordsList: [], // 消息列表
        firstRecord: '', // 轮播最后重复第一个
        winObj: {temChoose: [], keyString: ''}, // 胜负平对象
        ballSize: {temChoose: [], keyString: ''} // 大小球对象
      }
    },
    created () {
      this.uniqueId = this.$route.query.uniqueId
      this.matchNo = this.$route.query.matchNo
      this.getPageInfo()
      this.userInfo = JSON.parse(window.localStorage.getItem('userInfoNBA')) || {}
    },
    mounted () {
    },
    destroyed () {
      clearInterval(this.runTimer)
    },
    methods: {
      showQuestion () {
        this.shank = true
      },
      textSwiper () {
        let ulBox = this.$refs.ulBox
        let liArr = ulBox.children
        let recordsLength = this.recordsList.length
        let noEnd
        let tureArr = Array.prototype.slice.call(liArr)
        let lastSpan = tureArr.pop()
        this.sum = 0
        tureArr.forEach((val, index) => {
          this.sum = this.sum + val.clientWidth
        })
        tureArr.push(lastSpan)
        noEnd = this.sum - lastSpan.clientWidth
        ulBox.style.width = this.sum + 'px'
        this.sum = 0
        // 此处setTimeout 是为了使dom结构完全渲染 解决 计算属性宽度不准确
        window.setTimeout(() => {
          tureArr.forEach((val, index) => {
            this.sum = this.sum + val.clientWidth
          })
          noEnd = this.sum - lastSpan.clientWidth
          // 此处 + 10 是因为计算结果是整数 有误差 会把 最后一个span 挤下去
          ulBox.style.width = this.sum + 10 + 'px'
          recordsLength = this.recordsList.length
          if (recordsLength <= 0) return
          this.runTimer = window.setInterval(() => {
            this.step++
            ulBox.style.transform = `translateX(-${this.step}px)`
            if (this.recordsList.length >= 1) {
            }
            if (this.step >= noEnd) {
              this.step = 0
            }
          }, 25)
        }, 10)
        // window.setTimeout(() => {
      },
      pullUp () {
      },
      scrollDowns () {
        // 触底加载+-
      },
      pullDowns () {
        clearInterval(this.runTimer)
        this.getPageInfo(true)
        this.isPull = true
        // 下拉刷新
      },
      scrolls () {
      },
      getPageInfo (action) {
        this.$loading({
          state: true
        })
        // let that = this
        getHomeInfo({uniqueId: this.uniqueId, matchNo: this.matchNo, lotyId: 'JCLQ', betType: 'JCHH', lkey: this.lkey || localStorage.getItem('lkeyNBA')}).then(res => {
          if (res.data.errCode === 0) {
            this.data = res.data.data
            if (!action) {
              this.levelIndex = this.getNowMatchState(res.data.data.matchStageType)
            }
            this.matchPreview = res.data.data.matchPreview // 赛事预告数据
            this.prizeInfo = res.data.data.prizeInfo // 奖品信息
            this.levelList = res.data.data.matchSectionBet // 关卡信息
            // this.levelList.unshift(this.levelList.pop())
            this.firstPrize = res.data.data.prizeInfo[0] || {}
            this.secondPrize = res.data.data.prizeInfo[1] || {}
            this.thirdPrize = res.data.data.prizeInfo[2] || {}
            this.matchScore = res.data.data.matchScore // 每节得分情况
            this.matchSectionBet = res.data.data.matchSectionBet // 每节比赛投注信息
            this.lockSectionInfo = res.data.data.lockSectionInfo
            this.recordsList = [...res.data.data.broadcastInfo, ...res.data.data.broadcastInfo]
            this.firstRecord = this.recordsList.slice(0, 1)
            this.isHaveMatch = true
            if (this.recordsList.length > 0) {
              this.$nextTick(() => {
                this.textSwiper()
              })
            }
            // let isOncePrize = window.localStorage.getItem('isOncePrize')
            // if (res.data.data.lockSectionInfo.isLockAll === 1 && !this.isPull) {
            //   this.prizeModeState = true
            //   window.localStorage.setItem('isOncePrize', true)
            // }
            this.$loading({
              state: false
            })
          } else if (res.data.errCode === 3) {
            // that.getPageInfo()
            // window.location.href = window.location.href
          } else if (res.data.errCode === 1 && res.data.retCode === 1) {
            this.isHaveMatch = false
            this.$loading({
              state: false
            })
            this.$vux.toast.show({
              position: 'middle',
              type: 'text',
              width: '16em',
              time: 1500,
              text: '暂无比赛',
              isShowMask: true
            })
          }
        })
      },
      getNowMatchState (matchType) {
        let state
        switch (matchType) {
          case 0:
            state = 0
            break
          case 1:
            state = 0
            break
          case 2:
            state = 1
            break
          case 3:
            state = 2
            break
          case 4:
            state = 3
            break
          case 5:
            state = 2
            break
          case 6:
            state = 4
            break
          case 7:
            state = 4
            break
          case 8:
            state = 4
            break
          case 9:
            state = 4
            break
          default:
            state = 0
            break
        }
        return state
      },
      showPlugin () {
        let that = this
        this.$vux.confirm.show({
          title: '操作提示',
          content: '是否去充值页面',
          onShow () {
          },
          onHide () {
          },
          onCancel () {
            this.prizeModeState = false
          },
          onConfirm () {
            this.prizeModeState = false
            window.location.href = `http://hupudev.ttnba.cn?from=cjdj&user_code=${that.userCode}/#/recharge`
          }
        })
      },
      // 投注
      joinGame () {
        let dxf = this.levelList[this.levelIndex].dxf.temChoose
        let spf = this.levelList[this.levelIndex].spf.temChoose
        // if (!this.isHaveMatch) {
        //   this.$vux.toast.show({
        //     position: 'middle',
        //     type: 'text',
        //     width: '16em',
        //     time: 700,
        //     text: '暂无比赛，请稍后再来',
        //     isShowMask: true
        //   })
        //   return
        // }
        if (!dxf) {
          this.$vux.toast.show({
            position: 'middle',
            type: 'text',
            width: '16em',
            time: 700,
            text: '您还未选择大小分选项',
            isShowMask: true
          })
        } else if (!spf) {
          this.$vux.toast.show({
            position: 'middle',
            type: 'text',
            width: '16em',
            time: 700,
            text: '您还未选择胜平负选项',
            isShowMask: true
          })
        } else {
          let myBet = {DXF: dxf, SPF: spf}
          let params = {
            lotyId: 'JCLQ',
            betType: 'JCHH',
            issueNo: this.levelList[this.levelIndex].issueNo,
            betItemBo: JSON.stringify(myBet)
          }
          getJoinGuess(params).then(res => {
            if (res.data.errCode === 0) {
              this.$vux.toast.show({
                position: 'middle',
                width: '16em',
                type: 'text',
                time: 700,
                text: '投注成功',
                isShowMask: true
              })
              if (this.levelIndex < 4) {
                this.levelIndex = this.levelIndex + 1
              }
              this.getPageInfo(true)
            } else {
              if (res.data.errCode === 2 && res.data.retCode === 2144) {
                this.$vux.toast.show({
                  position: 'middle',
                  width: '16em',
                  type: 'text',
                  time: 700,
                  text: '未解锁',
                  isShowMask: true
                })
                // this.prizeModeState = true
              } else {
                this.$vux.toast.show({
                  position: 'middle',
                  width: '16em',
                  type: 'text',
                  time: 700,
                  text: '提交失败，请重试',
                  isShowMask: true
                })
              }
            }
          })
        }
      },
      // 解锁参加
      sureJoin () {
        let params = {
          payType: 3,
          payAmount: this.lockSectionInfo.allOpenMoney,
          oIssueNoList: this.lockSectionInfo.lockIssueNo,
          matchNo: this.data.matchNo,
          betType: 'JCHH',
          lotyId: 'JCLQ'
        }
        // if (this.data.balance < this.lockSectionInfo.allOpenMoney) {
        //   this.$vux.toast.show({
        //     position: 'middle',
        //     width: '16em',
        //     type: 'text',
        //     time: 700,
        //     text: '余额不足，请充值',
        //     isShowMask: true
        //   })
        //   return
        // }
        openIssuePass(params).then(res => {
          if (res.data.errCode === 0) {
            this.$vux.toast.show({
              position: 'middle',
              type: 'text',
              width: '16em',
              time: 700,
              text: '已参加',
              isShowMask: true
            })
            this.prizeModeState = false
            this.getPageInfo()
          } else if (res.data.retCode === 2109) {
            this.showPlugin()
          } else {
            this.$vux.toast.show({
              position: 'middle',
              width: '16em',
              type: 'text',
              time: 1000,
              text: res.data.msg,
              isShowMask: true
            })
          }
        })
      },
      hidePrizeMode () {
        // 控制奖品弹窗
        this.prizeModeState = false
      },
      // 跳转夺宝记录
      goListPage () {
        this.$router.push({name: 'list'})
      },
      // 跳转用户中心
      goUserPage () {
        this.$router.push({name: 'userCenter'})
      },
      // 猜胜负
      guessWin (item, e) {
        let defaultLevel = 1
        let freeLevel = 1
        if (item.sectionId === 5 && e === '1') {
          return
        }
        if (item.state >= 2) {
          this.$vux.toast.show({
            position: 'middle',
            type: 'text',
            width: '16em',
            time: 700,
            text: '关卡已截至',
            isShowMask: true
          })
          // return
        }
        // 第一次选中
        if (item.keyString.indexOf(e) === -1) {
          item.temChoose.push(e)
          // 数组去重
          let temArr = [...new Set(item.temChoose)]
          item.keyString = temArr.toString()
        } else { // 第二次选中取消
          item.temChoose.forEach((val, ind) => {
            if (val === e) {
              item.temChoose.splice(ind, 1)
            }
          })
          let temArr = [...new Set(item.temChoose)]
          item.keyString = temArr.toString()
        }
        let length = item.temChoose.length
        if (length > defaultLevel + freeLevel) {
          this.$vux.toast.show({
            position: 'middle',
            type: 'text',
            width: '16em',
            time: 700,
            text: '免费关卡已用完',
            isShowMask: true
          })
        }
        console.log(item.temChoose, 'item.temChoose', item.keyString)
        // temArr.forEach((val, ind) => {
        //   if (val === e) {
        //     temArr.splice(ind, 1)
        //   }
        // })
        // if (item[objIndex].myBetItem) {
        //   this.$vux.toast.show({
        //     position: 'middle',
        //     type: 'text',
        //     width: '16em',
        //     time: 700,
        //     text: '关卡已选择',
        //     isShowMask: true
        //   })
        //   return
        // }
        // if (item[objIndex].temChoose === e) {
        //   item[objIndex].temChoose = ''
        //   this.levelList.splice(index, 1, item)
        //   return
        // }
        // item[objIndex].temChoose = e
        // this.levelList.splice(index, 1, item)
      },
      // 猜大小球
      guessScore (item, e) {
        if (item.sectionId === 5 && e === '1') {
          return
        }
        if (item.state >= 2) {
          this.$vux.toast.show({
            position: 'middle',
            type: 'text',
            width: '16em',
            time: 700,
            text: '关卡已截至',
            isShowMask: true
          })
          // return
        }
        // 第一次选中
        if (item.keyString.indexOf(e) === -1) {
          item.temChoose.push(e)
          // 数组去重
          let temArr = [...new Set(item.temChoose)]
          item.keyString = temArr.toString()
        } else { // 第二次选中取消
          item.temChoose.forEach((val, ind) => {
            if (val === e) {
              item.temChoose.splice(ind, 1)
            }
          })
          let temArr = [...new Set(item.temChoose)]
          item.keyString = temArr.toString()
        }
        console.log(item.temChoose, 'item.temChoose', item.keyString)
      },
      // 关卡选择
      goTab (e) {
        this.levelIndex = e
      },
      onSwiperItemIndexChange (e) {
        // this.levelIndex = e
      },
      showShank () {
        this.shank = true
      },
      hideShankNow () {
        this.shank = false
      }
    },
    computed: {
      ...mapState({
        countx: state => state.lkey
      }),
      choosedNum () {
        return this.winObj.temChoose.length + this.ballSize.temChoose.length
      }
      // buttonFlag: () => {
      //   if (this.levelList[this.levelIndex].state < 2) {
      //     return true
      //   } else {
      //     return false
      //   }
      // }
    },
    watch: {
      choosedNum (newV, old) {
        if (newV >= 3 && newV > old) {
          console.log('数量大于三了')
        }
      }
    },
    components: {
      scroll,
      loading,
      XHeader,
      shank,
      SwiperItem,
      Swiper,
      CheckerItem,
      Checker,
      prizemode,
      Confirm
    }
  }
</script>
<style lang="stylus" scoped>
  @import "../../common/stylus/colorreset"
  @import "../../common/stylus/mixin"
  .home {
    height: 100vh;
    /*background-color $color-default-color;*/
    font-size:0.16rem;
    background-image: url('./img/bigBg.jpg');
    background-size: contain;
    width: 100%;
    position: fixed;
    /*touch-action: none;*/
    top 0
    color: #fff;
    .headerTop {
      position: absolute;
      height: .92rem;
      top 0
      width: 100%;
      z-index 10
    }
    .scrollContent {
      /*position: fixed;*/
      /*height: 10rem;*/
      height: 90vh;
      /*margin-top: 46px;*/
      /*padding-bottom:2rem;*/
      .bigBox {
        .matchInfo {
          width: 7.5rem;
          margin: 0 auto;
          height: 4.3rem;
          touch-action none
          .teamInfo {
            height: .4rem;
            line-height: .4rem;
            margin-bottom: 0.04rem;
            font-size .24rem
            display: flex;
            .teamName {
              flex: 1;
              // background-color: #fff;
              .nowScoreLeft {
                width .65rem
                text-align center
                float right 
                display inline-block
                color: $color-meta
                background-color #1e1e1e
              }
              .nowScoreRight {
                width .65rem
                text-align center
                float left 
                display inline-block
                color: $color-meta
                background-color #1e1e1e
              }
            }
            .space {
              flex: 0 0 .04rem;  
            }
          }
          .matchScore {
            width: 100%;
            height: 3.67rem;
            position: relative;
            bg-image('./img/topBg')
            /*background-size: contain;*/
            background-size: 7.5rem 3.67rem;
            background-repeat: no-repeat;
            background-position: center center;
            width 100%
            /*bg-image('./img/basebg')*/
            display flex
            justify-content center
            align-items center
            flex-wrap wrap
            position relative
            .matchPrize{
              width: 100%;
              margin-top .66rem
              font-size .34rem
              text-align center
              background: linear-gradient( #f8f4cf, #eecd90);
              -webkit-background-clip: text;
              color: transparent;
              font-weight bold
              span {
                font-size .6rem
                background: linear-gradient( #f8f4cf, #eecd90);
                -webkit-background-clip: text;
                color: transparent;
                font-weight bold
                font-size .5rem
              }
            }
            .bothTeamInfo {
              width: 6.61rem;
              height:1.76rem;
              padding-top .2rem
              display flex
              justify-content center
              align-items center
              .teamLeft {
                flex 208
                height: 100%;
                .homeName {
                  font-size .24rem
                  div {
                    display inline-block
                    vertical-align: middle;
                  }
                  .reallyName {
                    width: 100%;
                  }
                  .text {
                    /*width: 40%;*/
                  }
                }
                .logo {
                  height: .9rem;
                  text-align: center;
                  display flex
                  justify-content center
                  align-items center
                  .imgBox {
                    width: .9rem;
                    height: .9rem;
                    background-color: #e0d09d;
                    border-radius 50%
                    display flex
                    justify-content center
                    align-items center
                    img {
                      width: .84rem;
                      height: .84rem;
                      border-radius: 50%;
                    }
                  }
                }
              }
              .teamMiddle {
                flex 194
                height: 1.52rem;
                padding-top .24rem
                .title {
                  color $color-meta
                  font-size .24rem
                }
                .matchTime {
                  height: .3rem;
                  line-height: .3rem;
                  font-size .26rem
                  display flex
                  justify-content center
                  align-items center
                  .timeText {
                    width: 1.3rem;
                    height: 100%;
                    border-radius .12rem
                  }
                }
                .vs {
                  width: 100%;
                  height: 1.1rem;
                  line-height: 1.1rem;
                  font-weight bold
                  font-size .38rem
                }
              }
              .teamRight {
                height: 100%;
                flex 208
                .homeName {
                  font-size .24rem;
                  div {
                    display inline-block
                    vertical-align: middle;
                  }
                  .reallyName {
                    width: 70%;
                  }
                  .text {
                    width: 30%;
                  }
                }
                .logo {
                  height: .9rem;
                  text-align: center;
                  display flex
                  justify-content center
                  align-items center
                  .imgBox {
                    width: .9rem;
                    height: .9rem;
                    background-color: #e0d09d;
                    border-radius 50%
                    display flex
                    justify-content center
                    align-items center
                    img {
                      width: .84rem;
                      height: .84rem;
                      border-radius: 50%;
                    }
                  }
                }
              }
            }
            .bottomInfo {
              position: absolute;
              width: 100%;
              bottom: 0;
              font-size .24rem
              color #cc9900
            }
            .scoreUntil {
              width 6.1rem
              height 1.1rem
              background-color rgba(0,0,0,.4)
              border-radius .08rem
              display flex
              justify-content center
              .teamBoth {
                flex 2
                font-size .24rem
                .everyNode {
                  width 100%
                  height .31rem
                  line-height .31rem
                  color #838280
                }
                .middle {
                  width 90%
                  padding-left 10%
                  height .4rem
                  line-height .4rem
                  text-align center
                }
                .bottom {
                  width 90%
                  padding-left 10%
                  height .4rem
                  line-height .4rem
                }
              }
              .chooseUntil {
                flex 1 
                text-align center
                .everyNode {
                  width 100%
                  height .31rem
                  line-height .31rem
                  color #838280
                }
                .middle {
                  width 100%
                  height .4rem
                  line-height .4rem
                }
                .bottom {
                  width 100%
                  height .4rem
                  line-height .4rem
                }
              }
              .allMatch {
                .middle {
                  color: $color-meta
                }
                .bottom {
                  color: $color-meta
                }
              }
            }
          }
          .joinPeople {
            height .50rem
            line-height .50rem
            width 7.1rem
            margin 0 auto
            background-color: #e0d9c6;
            border: 0.02rem solid #999966;
            border-radius .3rem
            font-size .24rem
            color #000
            display flex
            justify-content space-between
            .joinLeft {
              height .50rem
              line-height .50rem
              float: left;
              padding-left: .2rem;
              width: 1.8rem;
              position: relative;
              .questionIcon {
                position: absolute;
                top 50%
                transform translateY(-50%)
                right 0
                width: .28rem;
                height: .28rem;
                bg-image('./img/question')
                -webkit-background-size: contain;
                background-size: contain;
                background-repeat: no-repeat;
              }
            }
            .joinRight {
              float right
              display inline-block
              padding-right .2rem
            }
            .people {
              font-size .24rem
              width: 100%;
            }
            .aboutShank {
              padding-right .3rem
              bg-image('./img/shank')
              line-height .70rem
              background-size .26rem .24rem
              background-position center right
              background-repeat no-repeat
            }
          }
        }
        .guessContainer {
          color #000
          .guessTitle {
            height: .4rem;
            line-height: .4rem;
            font-size .24rem
          }
          .guessButtonContainer {
            height: .8rem;
            line-height: .8rem;
            .buttonUntil {
              text-align center
              float left
              width: 2.48rem;
              height: 100%;
              font-size .28rem
              margin-left .03rem
              transition: all ease-in-out .2s;
              background-color: #ccc;
              &:first-child {
                margin-left 0 !important
              }
              span {
                color #336633
              }
              &.choosed {
                background-color: #cc3333;
                color #fff
                span {
                  color $color-meta
                }
              }
              &.result {
                position: relative;
                background-color: #cc3333;
                color #fff
                span {
                  color $color-meta
                }
                &::before {
                  width: .38rem;
                  height: .4rem;
                  content: ''
                  position: absolute;
                  right 0
                  bottom 0
                  bg-image('./img/corner')
                  -webkit-background-size: contain;
                  background-size: contain;
                }
              }
            }
          }
          .guessButtonSmall {
            width: 100%;
            height: 1.62rem;
            display flex
            justify-content space-between
            align-content space-between
            flex-wrap wrap
            &.marginBoth {
              margin .06rem 0
              height: .8rem;
            }
            .buttonUntilSmall {
              text-align center
              flex 0 0 1.48rem;
              height: .8rem;
              /*height: 100%;*/
              font-size .28rem
              line-height: .8rem;
              background-color: #ccc;
              span {
                color #336633
              }
              &.choosed {
                background-color: #cc3333;
                color #fff
                span {
                  color $color-meta
                }
              }
              &.result {
                position: relative;
                background-color: #cc3333;
                color #fff
                span {
                  color $color-meta
                }
                &::before {
                  width: .38rem;
                  height: .4rem;
                  content: ''
                  position: absolute;
                  right 0
                  bottom 0
                  bg-image('./img/corner')
                  -webkit-background-size: contain;
                  background-size: contain;
                }
              }
            }
          }
          .guessResult {

          }
          .guessSize {

          }
          .guessScore {

          }
        }
        .sureButton {
          width: 7.12rem;
          height: .8rem;
          font-size .34rem
          line-height: .8rem;
          background-color: #cc3333;
          color: #fff
          margin 0 auto
          margin-top .12rem
          border-radius .12rem
        }
      }
      /*overflow: hidden;*/
    }
  }
  .fade-enter-active, .fade-leave-active {
      animation: scale 0.5s;
    }
  .fade-enter, .fade-leave-to /* .fade-leave-active 在低于版本 2.1.8 中 */ {
  } 
  @keyframes scale {
    0%{
      transform: scale(1);
    }
    20% {
      transform: scale(1.2);
    }
    100%{
      transform: scale(1);
    }
  }
  .demo3-item {
    border: 0.1rem solid red;
  }
</style>  
